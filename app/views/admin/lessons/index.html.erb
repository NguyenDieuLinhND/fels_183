<% provide :title, t("provide.lessons") %>
<h1><%= t "provide.lessons" %></h1>

<div class="lesson-list">
  <table class="table table-striped">
    <thead class="thead_table_word">
      <tr>
        <td><%= t "title.lesson.created_date" %></td>
        <td><%= t "title.lesson.user" %></td>
        <td><%= t "title.lesson.subject" %></td>
        <td><%= t "title.lesson.status" %></td>
        <td><%= t "title.lesson.duration" %></td>
        <td><%= t "title.lesson.question_number" %></td>
        <td><%= t "title.lesson.spent_time" %></td>
        <td><%= t "title.lesson.score" %></td>
        <td></td>
      </tr>
    </thead>
    <tbody>
      <br>
      <div class="search center">
        <%= form_tag admin_lessons_path, method: :get do %>
          <%= text_field_tag :search_name, params[:search_name],
            placeholder: t("title.search_name") %>
          <%= submit_tag t("btn.search"), class: "btn btn-primary" %>
        <% end %>
      </div>
      <% if @lessons.any? %>
        <% @lessons.each do |lesson| %>
          <tr>
            <td><%= lesson.created_at.strftime t("format_date") %></td>
            <td><%= lesson.user.fullname %></td>
            <td><%= lesson.category.name %></td>
            <td>
              <p class="<%= "#{status_lesson lesson}" %>">
                <%= lesson.status %>
              </p>
            </td>
            <td><%= Settings.time_duration %></td>
            <td><%= lesson.results.count %></td>
            <td><%= lesson.spent_time %></td>
            <td>
              <%= t "title.count_correct", count_correct: lesson.score %>
              <%= t "title.results_count", results_count: lesson.results.count %>
            </td>
            <td><%= link_to t("btn.view"), [:admin, lesson], class: "btn btn-success" %></td>
          </tr>
        <% end %><br />
      <% end %>
    </tbody>
  </table>
  <div class="center"><%= will_paginate @lessons %></div>
</div>
